{"tasks":[{"environment":{},"displayName":"Publish-mon-actiongroup","alwaysRun":false,"continueOnError":false,"condition":"eq(variables['Deploy.Alerts'],'true')","enabled":true,"timeoutInMinutes":0,"inputs":{"connectedServiceNameARM":"$(Task.Subscription)","scriptLocation":"scriptPath","scriptPath":"$(System.DefaultWorkingDirectory)/_aks-rbac-pipelines-CI/drop/scripts/publish-mon-actiongroup.sh","inlineScript":"","args":"$(Task.AG.Name) $(Task.ResourceGroup)","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"},"task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"1.*","definitionType":"task"}},{"environment":{},"displayName":"Add Default Metric Alerts","alwaysRun":false,"continueOnError":false,"condition":"eq(variables['Deploy.Alerts'],'true')","enabled":true,"timeoutInMinutes":0,"inputs":{"ConnectedServiceName":"$(Task.Subscription)","action":"Create Or Update Resource Group","resourceGroupName":"$(Task.ResourceGroup)","location":"$(Task.Location)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_aks-rbac-pipelines-CI/drop/templates/arm-mon-metric-alerts.json","csmParametersFile":"","overrideParameters":"-aksName $(Task.AKS.ClusterName) -resourceId $(Task.AKS.Id) -actionGroupId $(Task.AKS.ActionGroup) -environmentName $(Release.Environmentname) -branch $(Build.SourceBranchName) -isEnabled \"true\" -managedBy \\\"$(Task.Tags.ManagedBy)\\\" -solutionOwner \\\"$(Task.Tags.SolutionOwner)\\\" -activityName \\\"$(Task.Tags.ActivityName)\\\" -dataClassification \\\"$(Task.Tags.DataClassification)\\\" -automation \\\"$(Task.Tags.Automation)\\\" -costCentre \\\"$(Task.Tags.CostCentre)\\\" -environment \\\"$(Task.Tags.Environment)\\\" -criticality \\\"$(Task.Tags.Criticality)\\\"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"},"task":{"id":"94a74903-f93f-4075-884f-dc11f34058b4","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Add Custom Search Alerts","alwaysRun":false,"continueOnError":false,"condition":"eq(variables['Deploy.Alerts'],'true')","enabled":true,"timeoutInMinutes":0,"inputs":{"ConnectedServiceName":"$(Task.Subscription)","action":"Create Or Update Resource Group","resourceGroupName":"$(Task.ResourceGroup)","location":"$(Task.Location)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_aks-rbac-pipelines-CI/drop/templates/arm-mon-custom-alerts.json","csmParametersFile":"","overrideParameters":"-aksName $(Task.AKS.ClusterName) -resourceId $(Task.AKS.Id) -actionGroupId $(Task.AKS.ActionGroup) -environmentName $(Release.Environmentname) -branch $(Build.SourceBranchName)  -isEnabled \"true\" -managedBy \\\"$(Task.Tags.ManagedBy)\\\" -solutionOwner \\\"$(Task.Tags.SolutionOwner)\\\" -activityName \\\"$(Task.Tags.ActivityName)\\\" -dataClassification \\\"$(Task.Tags.DataClassification)\\\" -automation \\\"$(Task.Tags.Automation)\\\" -costCentre \\\"$(Task.Tags.CostCentre)\\\" -environment \\\"$(Task.Tags.Environment)\\\" -criticality \\\"$(Task.Tags.Criticality)\\\"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"},"task":{"id":"94a74903-f93f-4075-884f-dc11f34058b4","versionSpec":"2.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":11,"createdBy":{"displayName":"Martin Palmer","id":"b0b049d4-4962-60c3-b214-94ae9fb50f1c","uniqueName":"Martin.Palmer@HMCTS.NET"},"createdOn":"2019-05-07T16:58:44.787Z","modifiedBy":{"displayName":"Martin Palmer","id":"b0b049d4-4962-60c3-b214-94ae9fb50f1c","uniqueName":"Martin.Palmer@HMCTS.NET"},"modifiedOn":"2019-05-17T13:28:13.123Z","comment":"","id":"61ae5bc8-dee2-4414-95ec-73def2bd7583","name":"AKS-Alerts","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M151_20190503.6/_content/icon-meta-task.png","friendlyName":"AKS-Alerts","description":"","category":"Deploy","definitionType":"metaTask","author":"Martin Palmer","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"Task.AG.Name","label":"Task.AG.Name","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.AKS.ActionGroup","label":"Task.AKS.ActionGroup","defaultValue":"$(actionGroupID)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.AKS.ClusterName","label":"Task.AKS.ClusterName","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.AKS.Id","label":"Task.AKS.Id","defaultValue":"$(aksID)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{"EditableOptions":"True"},"name":"Task.Location","label":"Task.Location","defaultValue":"$(Env.Location)","required":true,"type":"pickList","helpMarkDown":"Location for deploying the resource group. If the resource group already exists in the subscription, then this value will be ignored.","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.ResourceGroup","label":"Task.ResourceGroup","defaultValue":"$(Env.Core.ResourceGroup)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.Subscription","label":"Task.Subscription","defaultValue":"$(Subscription.ServiceConnection.Name)","required":true,"type":"connectedService:AzureRM","helpMarkDown":"Select the Azure Resource Manager subscription for the deployment.","groupName":""},{"aliases":[],"options":{"9fa43c40-be2e-4a8a-8f5a-d802639f4074":"azurerm-sandbox","0efabbc5-201e-47eb-9fca-cf11d9bbe1d0":"azurerm-nonprod","8ca9c99e-6bac-4167-a191-cca8be89f4f1":"azurerm-prod","7b6fbd2f-83a7-4b62-b33d-a2ea1699ca22":"azurerm-hmctsdemo","f69cf6ae-6cd8-430b-a269-e7f1c5a06098":"azurerm-rpetemp","cc9dd2ae-e8ce-4137-8d63-a5c161283d5e":"azurerm-qa","cef4bc08-a269-4e71-9c9d-4c3183130249":"azurerm_rpetemp_mi","dfefb825-7580-45ba-8a65-2894822e5ea1":"TEMP-DCD-RPE (a5453007-c32b-4336-9c79-3f643d817aea)","a6794204-7cef-4b23-8dd4-fa8dd9c5ffe8":"DCD-CFTAPPS-SBOX (aks-infra-sbox)","2e1a1894-879e-4abc-87d2-763f6b43b5bc":"timj-testing","22428f4c-8cca-4434-9ce3-04c951dc4c71":"timj-testing"},"properties":{},"name":"Task.Tags.ActivityName","label":"Task.Tags.ActivityName","defaultValue":"$(activityName)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.Tags.Automation","label":"Task.Tags.Automation","defaultValue":"$(automation)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.Tags.CostCentre","label":"Task.Tags.CostCentre","defaultValue":"$(costCentre)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.Tags.Criticality","label":"Task.Tags.Criticality","defaultValue":"$(criticality)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.Tags.DataClassification","label":"Task.Tags.DataClassification","defaultValue":"$(dataClassification)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.Tags.Environment","label":"Task.Tags.Environment","defaultValue":"$(environment)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.Tags.ManagedBy","label":"Task.Tags.ManagedBy","defaultValue":"$(managedBy)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Task.Tags.SolutionOwner","label":"Task.Tags.SolutionOwner","defaultValue":"$(solutionOwner)","required":true,"type":"string","helpMarkDown":"","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: AKS-Alerts $(Task.AG.Name)","preJobExecution":{},"execution":{},"postJobExecution":{}}